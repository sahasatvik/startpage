<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Startpage</title>
    
    <link rel="stylesheet" href="https://sahasatvik.github.io/cards.css">
    <link rel="stylesheet" href="styles.css">
    <link href="favicon.png" rel="shortcut icon" type="image/x-icon" />
</head>
<body>
    <div id="search">
        <input id="search-field" type="text" name="search-field" onkeypress="return search(event)"/>
    </div>
    <div id="global-container">
        <div id="clock"></div>
        <div id="clock-padding"></div>
        <div id="bookmark-card-container" class="card-container">
            <div id="comics-set" class="card card-dark">
                <div class="card-title">
                    Comics
                </div>
                <div class="card-inner-container">
                    <a class="card-item" href="http://www.commitstrip.com/en/?" target="_blank">commitstrip</a>
                    <a class="card-item" href="https://consolia-comic.com" target="_blank">consolia</a>
                    <a class="card-item" href="http://www.smbc-comics.com" target="_blank">smbc</a>
                    <a class="card-item" href="http://www.spikedmath.com" target="_blank">spikedmath</a>
                    <a class="card-item" href="http://turnoff.us" target="_blank">turnoff.us</a>
                    <a class="card-item" href="https://xkcd.com" target="_blank">xkcd</a>
                </div>
            </div>
            <div id="games-set" class="card card-dark">
                <div class="card-title">
                    Games
                </div>
                <div class="card-inner-container">
                    <a class="card-item" href="https://chess.com/home" target="_blank">chess.com</a>
                    <a class="card-item" href="https://chesstempo.com" target="_blank">chesstempo</a>
                    <a class="card-item" href="https://www.keybr.com" target="_blank">keybr</a>
                    <a class="card-item" href="https://www.keyhero.com/free-typing-test/" target="_blank">keyhero</a>
                    <a class="card-item" href="https://lichess.org" target="_blank">lichess</a>
                </div>
            </div>
            <div id="media-set" class="card card-dark">
                <div class="card-title">
                    Media
                </div>
                <div class="card-inner-container">
                    <a class="card-item" href="https://music.google.com" target="_blank">gplay music</a>
                    <a class="card-item" href="https://www.last.fm/user/sahasatvik" target="_blank">last.fm</a>
                    <a class="card-item" href="https://open.spotify.com/collection/playlists" target="_blank">spotify</a>
                    <a class="card-item" href="https://twitch.tv" target="_blank">twitch</a>
                    <a class="card-item" href="https://youtube.com" target="_blank">youtube</a>
                </div>
            </div>
            <div id="social-set" class="card card-dark">
                <div class="card-title">
                    Social
                </div>
                <div class="card-inner-container">
                    <a class="card-item" href="https://news.ycombinator.com" target="_blank">hackernews</a>
                    <a class="card-item" href="https://medium.com" target="_blank">medium</a>
                    <a class="card-item" href="https://quora.com" target="_blank">quora</a>
                    <a class="card-item" href="https://reddit.com" target="_blank">reddit</a>
                </div>
            </div>
            <div id="work-set" class="card card-dark">
                <div class="card-title">
                    Work
                </div>
                <div class="card-inner-container">
                    <a class="card-item" href="https://drive.google.com" target="_blank">drive</a>
                    <a class="card-item" href="https://github.com/sahasatvik" target="_blank">github</a>
                    <a class="card-item" href="https://mail.google.com" target="_blank">gmail</a>
                    <a class="card-item" href="https://en.wikipedia.org" target="_blank">wikipedia</a>
                    <a class="card-item" href="https://www.wolframalpha.com" target="_blank">wolframalpha</a>
                </div>
            </div>
        </div>
        <a id="help" href="https://github.com/sahasatvik/startpage#startpage" target="_blank">help</a>
    </div>

    <script>
        // Define trigger key codes [/ ? : ; g r w y]
        var triggers = [191, 59, 186, 71, 82, 87, 89];
        
        // Define search patterns
        var searchPatterns = [
            { pattern:  /^\?/i,
              link:     (val) => 'https://github.com/sahasatvik/startpage#commands'},
            { pattern:  /^:/i,
              link:     (val) => 'http://' + val.substring(1)},
            { pattern:  /^;/i,
              link:     (val) => 'https://' + val.substring(1)},
            { pattern:  /^r\/.+/i,
              link:     (val) => 'https://reddit.com/' + val},
            { pattern:  /^r(\/)?$/i,
              link:     (val) => 'https://reddit.com'},
            { pattern:  /^y\/s$/i,
              link:     (val) => 'https://youtube.com/feed/subscriptions'},
            { pattern:  /^y\/.+/i,
              link:     (val) => 'https://youtube.com/results?search_query=' + val.substring(2)},
            { pattern:  /^y(\/)?$/i,
              link:     (val) => 'https://youtube.com'},
            { pattern:  /^w\/.+/i,
              link:     (val) => 'https://wikipedia.org/wiki/' + val.substring(2)},
            { pattern:  /^w(\/)?$/i,
              link:     (val) => 'https://wikipedia.org'},
            { pattern:  /^g\/acc(ount)?$/i,
              link:     (val) => 'https://myaccount.google.com'},
            { pattern:  /^g\/c(al(endar)?)?$/i,
              link:     (val) => 'https://calendar.google.com'},
            { pattern:  /^g\/c(on(tact(s)?)?)?$/i,
              link:     (val) => 'https://contacts.google.com'},
            { pattern:  /^g\/d(rive)?$/i,
              link:     (val) => 'https://drive.google.com'},
            { pattern:  /^g\/k(eep)?$/i,
              link:     (val) => 'https://keep.google.com'},
            { pattern:  /^g\/n(ews)?$/i,
              link:     (val) => 'https://news.google.com'},
            { pattern:  /^g\/(about)?me$/i,
              link:     (val) => 'https://aboutme.google.com'},
            { pattern:  /^g\/m(ail)?$/i,
              link:     (val) => 'https://mail.google.com'},
            { pattern:  /^g\/m(ap(s)?)?$/i,
              link:     (val) => 'https://maps.google.com'},
            { pattern:  /^g\/m(us(ic)?)?$/i,
              link:     (val) => 'https://music.google.com'},
            { pattern:  /^g\/p(ho(to(s)?)?)?$/i,
              link:     (val) => 'https://photos.google.com'},
            { pattern:  /^g\/t(ra(nslate)?)?$/i,
              link:     (val) => 'https://translate.google.com'},
            { pattern:  /^g\/.+/i,
              link:     (val) => 'https://google.com/search?q=' + val.substring(2)},
            { pattern:  /^g(\/)?$/i,
              link:     (val) => 'https://google.com'},
            { pattern:  /^\/.+/i,
              link:     (val) => 'https://google.com/search?q=' + val.substring(1)},
            { pattern:  /^\/$/i,
              link:     (val) => 'https://google.com'},
            { pattern:  /^.+/i,
              link:     (val) => 'https://google.com/search?q=' + val}
        ];
        // Search on enter key event
        function search(e) {
            if (e.keyCode == 13) {
                var val = document.getElementById("search-field").value.trim();
                for (var i in searchPatterns) {
                    if (searchPatterns[i].pattern.test(val)) {
                        window.open(searchPatterns[i].link(val));
                        closeSearch();
                        break;
                    }
                }
            }
        }
        // Get current time and format
        function getTime() {
            let date = new Date(),
                min = date.getMinutes(),
                sec = date.getSeconds(),
                hour = date.getHours();

            return "" + 
                (hour < 10 ? ("0" + hour) : hour) + ":" + 
                (min < 10 ? ("0" + min) : min) + ":" + 
                (sec < 10 ? ("0" + sec) : sec);
        }

        function openSearch() {
            document.getElementById('search').style.display = 'flex';
            document.getElementById('search-field').focus();
        }

        function closeSearch() {
            document.getElementById('search-field').value = '';
            document.getElementById('search-field').blur();
            document.getElementById('search').style.display = 'none';
        }

        window.onload = () => {
            // Set up the clock
            document.getElementById("clock").innerHTML = getTime();
            // Set clock interval to tick clock and update greeting
            setInterval( () => {
                document.getElementById("clock").innerHTML = getTime();
            }, 100);
        }
        
        document.addEventListener("keydown", event => {
            let code = event.keyCode;
            if (triggers.includes(code)) {
                openSearch();
            } else if (code == 27) {                        // Esc to close search
                closeSearch();
            }
        });
    </script>
</body>
</html>
